name: Discord Bot 
on:
    push:
      branches:
        - main
    workflow_run:
        workflows: [Rerun Bot]
        types: [completed]
env:
 TOKEN: ${{ secrets.TOKEN }}
 OWNERID: ${{ secrets.OWNERID }}
jobs:
  run-bot:
    runs-on: windows-latest
    steps:
        - name: Checkout repository
          uses: actions/checkout@v4
        - name: Cache Stuff
          uses: actions/cache@v4
          with:
            path: '%LocalAppData%\pip\Cache'
            key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
        - name: Install Dependencies
          if: steps.cache.outputs.cache-hit != 'true'
          run: |
            pip install -r requirements.txt
        - name: Start Bot
          run: |
            python bot.py
          
